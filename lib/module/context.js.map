{"version":3,"names":["React","createContext","useCallback","useMemo","useReducer","useRef","Types","defaultTheme","background","color","initialState","theme","fontFamily","fontSize","atStart","atEnd","key","totalLocations","currentLocation","meta","cover","author","title","description","language","publisher","rights","progress","locations","isLoading","isRendering","searchResults","bookReducer","state","action","type","CHANGE_THEME","payload","CHANGE_FONT_SIZE","CHANGE_FONT_FAMILY","SET_AT_START","SET_AT_END","SET_KEY","SET_TOTAL_LOCATIONS","SET_CURRENT_LOCATION","SET_META","SET_PROGRESS","SET_LOCATIONS","SET_IS_LOADING","SET_IS_RENDERING","SET_SEARCH_RESULTS","ReaderContext","registerBook","setAtStart","setAtEnd","setTotalLocations","setCurrentLocation","setMeta","setProgress","setLocations","setIsLoading","setIsRendering","goToLocation","goPrevious","goNext","getLocations","getCurrentLocation","getMeta","search","changeTheme","changeFontFamily","changeFontSize","addMark","removeMark","setKey","setSearchResults","ReaderProvider","_ref","children","dispatch","book","bookRef","current","_book$current","injectJavaScript","JSON","stringify","_book$current2","size","_book$current3","location","targetCfi","_book$current4","_book$current5","_book$current6","query","_book$current7","results","cfiRange","data","callback","className","styles","_book$current8","defaultStyles","fill","_book$current9","contextValue","createElement","Provider","value"],"sources":["context.tsx"],"sourcesContent":["import React, {\n  createContext,\n  useCallback,\n  useMemo,\n  useReducer,\n  useRef,\n} from 'react';\nimport type WebView from 'react-native-webview';\nimport type {\n  ePubCfi,\n  FontSize,\n  Location,\n  Mark,\n  SearchResult,\n  Theme,\n} from './types';\n\ntype ActionMap<M extends { [index: string]: any }> = {\n  [Key in keyof M]: M[Key] extends undefined\n    ? {\n        type: Key;\n      }\n    : {\n        type: Key;\n        payload: M[Key];\n      };\n};\n\nenum Types {\n  CHANGE_THEME = 'CHANGE_THEME',\n  CHANGE_FONT_SIZE = 'CHANGE_FONT_SIZE',\n  CHANGE_FONT_FAMILY = 'CHANGE_FONT_FAMILY',\n  SET_AT_START = 'SET_AT_START',\n  SET_AT_END = 'SET_AT_END',\n  SET_KEY = 'SET_KEY',\n  SET_TOTAL_LOCATIONS = 'SET_TOTAL_LOCATIONS',\n  SET_CURRENT_LOCATION = 'SET_CURRENT_LOCATION',\n  SET_META = 'SET_META',\n  SET_PROGRESS = 'SET_PROGRESS',\n  SET_LOCATIONS = 'SET_LOCATIONS',\n  SET_IS_LOADING = 'SET_IS_LOADING',\n  SET_IS_RENDERING = 'SET_IS_RENDERING',\n  SET_SEARCH_RESULTS = 'SET_SEARCH_RESULTS',\n}\n\ntype BookPayload = {\n  [Types.CHANGE_THEME]: Theme;\n  [Types.CHANGE_FONT_SIZE]: FontSize;\n  [Types.CHANGE_FONT_FAMILY]: string;\n  [Types.SET_AT_START]: boolean;\n  [Types.SET_AT_END]: boolean;\n  [Types.SET_KEY]: string;\n  [Types.SET_TOTAL_LOCATIONS]: number;\n  [Types.SET_CURRENT_LOCATION]: Location;\n  [Types.SET_META]: {\n    cover: string | ArrayBuffer | null | undefined;\n    author: string;\n    title: string;\n    description: string;\n    language: string;\n    publisher: string;\n    rights: string;\n  };\n  [Types.SET_PROGRESS]: number;\n  [Types.SET_LOCATIONS]: ePubCfi[];\n  [Types.SET_IS_LOADING]: boolean;\n  [Types.SET_IS_RENDERING]: boolean;\n  [Types.SET_SEARCH_RESULTS]: SearchResult[];\n};\n\ntype BookActions = ActionMap<BookPayload>[keyof ActionMap<BookPayload>];\n\ntype InitialState = {\n  theme: Theme;\n  fontFamily: string;\n  fontSize: FontSize;\n  atStart: boolean;\n  atEnd: boolean;\n  key: string;\n  totalLocations: number;\n  currentLocation: Location | null;\n  meta: {\n    cover: string | ArrayBuffer | null | undefined;\n    author: string;\n    title: string;\n    description: string;\n    language: string;\n    publisher: string;\n    rights: string;\n  };\n  progress: number;\n  locations: ePubCfi[];\n  isLoading: boolean;\n  isRendering: boolean;\n  searchResults: SearchResult[];\n};\n\nexport const defaultTheme: Theme = {\n  'body': {\n    background: '#fff',\n  },\n  'span': {\n    color: '#000 !important',\n  },\n  'p': {\n    color: '#000 !important',\n  },\n  'li': {\n    color: '#000 !important',\n  },\n  'h1': {\n    color: '#000 !important',\n  },\n  'a': {\n    'color': '#000 !important',\n    'pointer-events': 'auto',\n    'cursor': 'pointer',\n  },\n  '::selection': {\n    background: 'lightskyblue',\n  },\n};\n\nconst initialState: InitialState = {\n  theme: defaultTheme,\n  fontFamily: 'Helvetica',\n  fontSize: '12pt',\n  atStart: false,\n  atEnd: false,\n  key: '',\n  totalLocations: 0,\n  currentLocation: null,\n  meta: {\n    cover: '',\n    author: '',\n    title: '',\n    description: '',\n    language: '',\n    publisher: '',\n    rights: '',\n  },\n  progress: 0,\n  locations: [],\n  isLoading: true,\n  isRendering: true,\n  searchResults: [],\n};\n\nfunction bookReducer(state: InitialState, action: BookActions): InitialState {\n  switch (action.type) {\n    case Types.CHANGE_THEME:\n      return {\n        ...state,\n        theme: action.payload,\n      };\n    case Types.CHANGE_FONT_SIZE:\n      return {\n        ...state,\n        fontSize: action.payload,\n      };\n    case Types.CHANGE_FONT_FAMILY:\n      return {\n        ...state,\n        fontFamily: action.payload,\n      };\n    case Types.SET_AT_START:\n      return {\n        ...state,\n        atStart: action.payload,\n      };\n    case Types.SET_AT_END:\n      return {\n        ...state,\n        atEnd: action.payload,\n      };\n    case Types.SET_KEY:\n      return {\n        ...state,\n        key: action.payload,\n      };\n    case Types.SET_TOTAL_LOCATIONS:\n      return {\n        ...state,\n        totalLocations: action.payload,\n      };\n    case Types.SET_CURRENT_LOCATION:\n      return {\n        ...state,\n        currentLocation: action.payload,\n      };\n    case Types.SET_META:\n      return {\n        ...state,\n        meta: action.payload,\n      };\n    case Types.SET_PROGRESS:\n      return {\n        ...state,\n        progress: action.payload,\n      };\n    case Types.SET_LOCATIONS:\n      return {\n        ...state,\n        locations: action.payload,\n      };\n    case Types.SET_IS_LOADING:\n      return {\n        ...state,\n        isLoading: action.payload,\n      };\n    case Types.SET_IS_RENDERING:\n      return {\n        ...state,\n        isRendering: action.payload,\n      };\n    case Types.SET_SEARCH_RESULTS:\n      return {\n        ...state,\n        searchResults: action.payload,\n      };\n    default:\n      return state;\n  }\n}\n\nexport interface ReaderContextProps {\n  registerBook: (bookRef: WebView) => void;\n  setAtStart: (atStart: boolean) => void;\n  setAtEnd: (atEnd: boolean) => void;\n  setTotalLocations: (totalLocations: number) => void;\n  setCurrentLocation: (location: Location) => void;\n  setMeta: (meta: {\n    cover: string | ArrayBuffer | null | undefined;\n    author: string;\n    title: string;\n    description: string;\n    language: string;\n    publisher: string;\n    rights: string;\n  }) => void;\n  setProgress: (progress: number) => void;\n  setLocations: (locations: ePubCfi[]) => void;\n  setIsLoading: (isLoading: boolean) => void;\n  setIsRendering: (isRendering: boolean) => void;\n\n  /**\n   * Go to specific location in the book\n   * @param {ePubCfi} target {@link ePubCfi}\n   */\n  goToLocation: (cfi: ePubCfi) => void;\n\n  /**\n   * Go to previous page in the book\n   */\n  goPrevious: () => void;\n\n  /**\n   * Go to next page in the book\n   */\n  goNext: () => void;\n\n  /**\n   * Get the total locations of the book\n   */\n  getLocations: () => ePubCfi[];\n\n  /**\n   * Returns the current location of the book\n   * @returns {Location} {@link Location}\n   */\n  getCurrentLocation: () => Location | null;\n\n  /**\n   * Returns an object containing the book's metadata\n   * @returns { cover: string | ArrayBuffer | null | undefined, author: string, title: string, description: string, language: string, publisher: string, rights: string, }\n   */\n  getMeta: () => {\n    cover: string | ArrayBuffer | null | undefined;\n    author: string;\n    title: string;\n    description: string;\n    language: string;\n    publisher: string;\n    rights: string;\n  };\n\n  /**\n   * Search for a specific text in the book\n   * @param {string} query {@link string} text to search\n   */\n  search: (query: string) => void;\n\n  /**\n   * @param theme {@link Theme}\n   * @description Theme object.\n   * @example\n   * ```\n   * selectTheme({ body: { background: '#fff' } });\n   * ```\n   */\n  changeTheme: (theme: Theme) => void;\n\n  /**\n   * Change font size of all elements in the book\n   * @param font\n   * @see https://www.w3schools.com/cssref/css_websafe_fonts.asp\n   */\n  changeFontFamily: (fontFamily: string) => void;\n\n  /**\n   * Change font size of all elements in the book\n   * @param {FontSize} size {@link FontSize}\n   */\n  changeFontSize: (size: FontSize) => void;\n\n  /**\n   * Add Mark a specific cfi in the book\n   */\n  addMark: (\n    type: Mark,\n    cfiRange: ePubCfi,\n    data?: any,\n    callback?: () => void,\n    className?: string,\n    styles?: any\n  ) => void;\n\n  /**\n   * Remove Mark a specific cfi in the book\n   */\n  removeMark: (cfiRange: ePubCfi, type: Mark) => void;\n\n  setKey: (key: string) => void;\n\n  /**\n   * Works like a unique id for book\n   */\n  key: string;\n\n  /**\n   * A theme object.\n   */\n  theme: Theme;\n\n  /**\n   * Indicates if you are at the beginning of the book\n   * @returns {boolean} {@link boolean}\n   */\n  atStart: boolean;\n\n  /**\n   * Indicates if you are at the end of the book\n   * @returns {boolean} {@link boolean}\n   */\n  atEnd: boolean;\n\n  /**\n   * The total number of locations\n   */\n  totalLocations: number;\n\n  /**\n   * The current location of the book\n   */\n  currentLocation: Location | null;\n\n  /**\n   * An object containing the book's metadata\n   * { cover: string | ArrayBuffer | null | undefined, author: string, title: string, description: string, language: string, publisher: string, rights: string, }\n   */\n  meta: {\n    cover: string | ArrayBuffer | null | undefined;\n    author: string;\n    title: string;\n    description: string;\n    language: string;\n    publisher: string;\n    rights: string;\n  };\n\n  /**\n   * The progress of the book\n   * @returns {number} {@link number}\n   */\n  progress: number;\n\n  locations: ePubCfi[];\n\n  /**\n   * Indicates if the book is loading\n   * @returns {boolean} {@link boolean}\n   */\n  isLoading: boolean;\n\n  /**\n   * Indicates if the book is rendering\n   * @returns {boolean} {@link boolean}\n   */\n  isRendering: boolean;\n\n  /**\n   * Search results\n   * @returns {SearchResult[]} {@link SearchResult[]}\n   */\n  searchResults: SearchResult[];\n\n  setSearchResults: (results: SearchResult[]) => void;\n}\n\nconst ReaderContext = createContext<ReaderContextProps>({\n  registerBook: () => {},\n  setAtStart: () => {},\n  setAtEnd: () => {},\n  setTotalLocations: () => {},\n  setCurrentLocation: () => {},\n  setMeta: () => {},\n  setProgress: () => {},\n  setLocations: () => {},\n  setIsLoading: () => {},\n  setIsRendering: () => {},\n\n  goToLocation: () => {},\n  goPrevious: () => {},\n  goNext: () => {},\n  getLocations: () => [],\n  getCurrentLocation: () => null,\n  getMeta: () => ({\n    cover: '',\n    author: '',\n    title: '',\n    description: '',\n    language: '',\n    publisher: '',\n    rights: '',\n  }),\n  search: () => {},\n\n  changeTheme: () => {},\n  changeFontFamily: () => {},\n  changeFontSize: () => {},\n\n  addMark: () => {},\n  removeMark: () => {},\n\n  setKey: () => {},\n  key: '',\n\n  theme: defaultTheme,\n  atStart: false,\n  atEnd: false,\n  totalLocations: 0,\n  currentLocation: null,\n  meta: {\n    cover: '',\n    author: '',\n    title: '',\n    description: '',\n    language: '',\n    publisher: '',\n    rights: '',\n  },\n  progress: 0,\n  locations: [],\n  isLoading: true,\n  isRendering: true,\n\n  searchResults: [],\n  setSearchResults: () => {},\n});\n\nfunction ReaderProvider({ children }: { children: React.ReactNode }) {\n  const [state, dispatch] = useReducer(bookReducer, initialState);\n  const book = useRef<WebView | null>(null);\n\n  const registerBook = useCallback((bookRef: WebView) => {\n    book.current = bookRef;\n  }, []);\n\n  const changeTheme = useCallback((theme: Theme) => {\n    book.current?.injectJavaScript(`\n      rendition.themes.register({ theme: ${JSON.stringify(theme)} });\n      rendition.themes.select('theme');\n      rendition.views().forEach(view => view.pane ? view.pane.render() : null); true;\n    `);\n    dispatch({ type: Types.CHANGE_THEME, payload: theme });\n  }, []);\n\n  const changeFontFamily = useCallback((fontFamily: string) => {\n    book.current?.injectJavaScript(`\n      rendition.themes.font('${fontFamily}');\n    `);\n    dispatch({ type: Types.CHANGE_FONT_FAMILY, payload: fontFamily });\n  }, []);\n\n  const changeFontSize = useCallback((size: FontSize) => {\n    book.current?.injectJavaScript(`\n      rendition.themes.fontSize('${size}'); true\n    `);\n    dispatch({ type: Types.CHANGE_FONT_SIZE, payload: size });\n  }, []);\n\n  const setAtStart = useCallback((atStart: boolean) => {\n    dispatch({ type: Types.SET_AT_START, payload: atStart });\n  }, []);\n\n  const setAtEnd = useCallback((atEnd: boolean) => {\n    dispatch({ type: Types.SET_AT_END, payload: atEnd });\n  }, []);\n\n  const setTotalLocations = useCallback((totalLocations: number) => {\n    dispatch({ type: Types.SET_TOTAL_LOCATIONS, payload: totalLocations });\n  }, []);\n\n  const setCurrentLocation = useCallback((location: Location) => {\n    dispatch({ type: Types.SET_CURRENT_LOCATION, payload: location });\n  }, []);\n\n  const setMeta = useCallback(\n    (meta: {\n      cover: string | ArrayBuffer | null | undefined;\n      author: string;\n      title: string;\n      description: string;\n      language: string;\n      publisher: string;\n      rights: string;\n    }) => {\n      dispatch({ type: Types.SET_META, payload: meta });\n    },\n    []\n  );\n\n  const setProgress = useCallback((progress: number) => {\n    dispatch({ type: Types.SET_PROGRESS, payload: progress });\n  }, []);\n\n  const setLocations = useCallback((locations: ePubCfi[]) => {\n    dispatch({ type: Types.SET_LOCATIONS, payload: locations });\n  }, []);\n\n  const setIsLoading = useCallback((isLoading: boolean) => {\n    dispatch({ type: Types.SET_IS_LOADING, payload: isLoading });\n  }, []);\n\n  const setIsRendering = useCallback((isRendering: boolean) => {\n    dispatch({ type: Types.SET_IS_RENDERING, payload: isRendering });\n  }, []);\n\n  const goToLocation = useCallback((targetCfi: ePubCfi) => {\n    book.current?.injectJavaScript(`rendition.display('${targetCfi}'); true`);\n  }, []);\n\n  const goPrevious = useCallback(() => {\n    book.current?.injectJavaScript(`rendition.prev(); true`);\n  }, []);\n\n  const goNext = useCallback(() => {\n    book.current?.injectJavaScript(`rendition.next(); true`);\n  }, []);\n\n  const getLocations = useCallback(() => state.locations, [state.locations]);\n\n  const getCurrentLocation = useCallback(() => state.currentLocation, [\n    state.currentLocation,\n  ]);\n\n  const getMeta = useCallback(() => state.meta, [state.meta]);\n\n  const search = useCallback((query: string) => {\n    book.current?.injectJavaScript(`\n      Promise.all(\n        book.spine.spineItems.map((item) => {\n          return item.load(book.load.bind(book)).then(() => {\n            let results = item.find('${query}'.trim());\n            item.unload();\n            return Promise.resolve(results);\n          });\n        })\n      ).then((results) =>\n        window.ReactNativeWebView.postMessage(\n          JSON.stringify({ type: 'onSearch', results: [].concat.apply([], results) })\n        )\n      ); true\n    `);\n  }, []);\n\n  const setSearchResults = useCallback((results: SearchResult[]) => {\n    dispatch({ type: Types.SET_SEARCH_RESULTS, payload: results });\n  }, []);\n\n  const addMark = useCallback(\n    (\n      type: Mark,\n      cfiRange: string,\n      data?: any,\n      callback?: () => void,\n      className?: string,\n      styles?: any\n    ) => {\n      const defaultStyles = { fill: 'yellow' };\n\n      book.current?.injectJavaScript(`\n      rendition.annotations.add('${type}', '${cfiRange}', ${JSON.stringify(\n        data ?? {}\n      )}, ${JSON.stringify(\n        callback ? callback() : () => {}\n      )}, '${className}', ${JSON.stringify(styles ?? defaultStyles)}); true\n    `);\n    },\n    []\n  );\n\n  const removeMark = useCallback((cfiRange: string, type: Mark) => {\n    book.current?.injectJavaScript(`\n      rendition.annotations.remove('${cfiRange}', '${type}'); true\n    `);\n  }, []);\n\n  const setKey = useCallback((key: string) => {\n    dispatch({ type: Types.SET_KEY, payload: key });\n  }, []);\n\n  const contextValue = useMemo(\n    () => ({\n      registerBook,\n      setAtStart,\n      setAtEnd,\n      setTotalLocations,\n      setCurrentLocation,\n      setMeta,\n      setProgress,\n      setLocations,\n      setIsLoading,\n      setIsRendering,\n\n      goToLocation,\n      goPrevious,\n      goNext,\n      getLocations,\n      getCurrentLocation,\n      getMeta,\n      search,\n\n      addMark,\n      removeMark,\n\n      setKey,\n      key: state.key,\n\n      changeTheme,\n      changeFontFamily,\n      changeFontSize,\n      theme: state.theme,\n\n      atStart: state.atStart,\n      atEnd: state.atEnd,\n      totalLocations: state.totalLocations,\n      currentLocation: state.currentLocation,\n      meta: state.meta,\n      progress: state.progress,\n      locations: state.locations,\n      isLoading: state.isLoading,\n      isRendering: state.isRendering,\n\n      searchResults: state.searchResults,\n      setSearchResults,\n    }),\n    [\n      addMark,\n      changeFontFamily,\n      changeFontSize,\n      changeTheme,\n      getCurrentLocation,\n      getMeta,\n      getLocations,\n      goNext,\n      goPrevious,\n      goToLocation,\n      registerBook,\n      removeMark,\n      search,\n      setAtEnd,\n      setAtStart,\n      setCurrentLocation,\n      setMeta,\n      setIsLoading,\n      setIsRendering,\n      setKey,\n      setLocations,\n      setProgress,\n      setSearchResults,\n      setTotalLocations,\n      state.atEnd,\n      state.atStart,\n      state.currentLocation,\n      state.meta,\n      state.isLoading,\n      state.isRendering,\n      state.key,\n      state.locations,\n      state.progress,\n      state.searchResults,\n      state.theme,\n      state.totalLocations,\n    ]\n  );\n  return (\n    <ReaderContext.Provider value={contextValue}>\n      {children}\n    </ReaderContext.Provider>\n  );\n}\n\nexport { ReaderProvider, ReaderContext };\n"],"mappings":"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"}